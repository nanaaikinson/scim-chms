(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b07b3ae8"],{"06b2":function(t,e,n){"use strict";var s=n("df36"),a=n.n(s);a.a},"1b07":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"col-md-8 offset-md-2"},[n("Steps",{attrs:{current:t.current,status:t.stepStatus}},[n("Step",{attrs:{title:"Download Template"}}),n("Step",{attrs:{title:"Upload Data File"}}),n("Step",{attrs:{title:"Import Contribution"}})],1),n("keep-alive",[0===t.current?n("StepOne",{on:{"set-step":t.changeStep}}):t._e()],1),n("keep-alive",[1===t.current?n("StepTwo",{attrs:{file:t.form.file},on:{"set-step":t.changeStep,"set-back":t.changeStepBack,"set-file":t.setFile}}):t._e()],1),2===t.current?n("StepThree",{on:{"set-back":t.changeStepBack,"submit-data":t.submitData}}):t._e()],1)])])])},a=[],i=(n("d81d"),n("07ac"),n("96cf"),n("1da1")),r=n("f825"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",[n("div",{},[n("div",{staticClass:"mb-3"},[n("button",{ref:"downloadTem",staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.downloadTemplate(e)}}},[t._v(" Download Template ")])]),n("div",[n("button",{staticClass:"btn btn-success",attrs:{disabled:t.disableProgessButton},on:{click:t.next}},[t._v(" Next ")])])])])])},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-info mb-3 mt-4"},[n("h5",[t._v("Notes about how to import expenses from excel file")]),n("ul",{staticClass:"pl-3 mt-2"},[n("li",[t._v("Make sure to download file before you proceed.")]),n("li",[t._v(" Required Fields in the excel template are, Type, Amount, Method And TItle ")]),n("li",[t._v(" Values for payment methods are as follows; "),n("ul",{staticClass:"pl-4"},[n("li",[t._v("1 is for Cash")]),n("li",[t._v("2 is for Cheque")]),n("li",[t._v("3 is for Online")]),n("li",[t._v("4 is for Mobile Money")])])]),n("li",[t._v(" Values for contribution type are as follows; "),n("ul",{staticClass:"pl-4"},[n("li",[t._v("1 is for Tithe")]),n("li",[t._v("2 is for Busing")]),n("li",[t._v("3 is for Covenant Partner")]),n("li",[t._v("4 is for Group")]),n("li",[t._v("5 is for Welfare")]),n("li",[t._v("6 is for Pledge")]),n("li",[t._v("7 is for General")])])])])])}],c=n("c567"),u=n("ca16"),p={data:function(){return{disableProgessButton:!0}},methods:{next:function(){this.disableProgessButton||this.$emit("set-step")},downloadTemplate:function(t,e){var n=this,s=this.$refs.downloadTem;Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,i,r,o,l,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,Object(u["a"])(s),t.next=4,c["a"].contributiontemplate();case 4:e=t.sent,Object(u["b"])(s),n.disableProgessButton=!1,a=e.data,i=a.data,r=i.url,o=i.filename,l=document.createElement("a"),l.setAttribute("download",o),l.setAttribute("href",r),document.body.appendChild(l),l.click(),document.body.removeChild(l),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](0),p=t.t0.response.data,Swal.fire({icon:"error",title:p.message}),Object(u["b"])(s);case 22:case"end":return t.stop()}}),t,null,[[0,17]])})))()}}},f=p,m=n("2877"),d=Object(m["a"])(f,o,l,!1,null,null,null),b=d.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",[n("BFormFile",{staticClass:"mb-3",attrs:{plain:""},model:{value:t.uploadFile,callback:function(e){t.uploadFile=e},expression:"uploadFile"}}),n("div",{staticClass:"d-flex justify-content-between"},[n("button",{staticClass:"btn btn-primary mr-3",on:{click:t.previous}},[t._v("Previous")]),n("button",{staticClass:"btn btn-success",attrs:{disabled:t.disableProgessButton},on:{click:t.next}},[t._v(" Next ")])])],1)])},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-info mb-3 mt-4"},[n("p",{staticClass:"mb-0"},[t._v("Please upload the data file.")])])}],_=n("c43f"),S={name:"StepTwo",components:{BFormFile:_["a"]},props:["file"],data:function(){return{uploadFile:null}},computed:{disableProgessButton:function(){return!this.file}},watch:{uploadFile:function(t){this.$emit("set-file",t)}},methods:{next:function(t){this.$emit("set-step")},previous:function(t){this.$emit("set-back")}}},w=S,g=Object(m["a"])(w,v,h,!1,null,null,null),C=g.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",[n("div",{staticClass:"d-flex justify-content-between"},[n("button",{ref:"previousBtn",staticClass:"btn btn-primary mr-3",on:{click:t.previous}},[t._v(" Previous ")]),n("button",{ref:"submitBtn",staticClass:"btn btn-success",on:{click:t.submitData}},[t._v(" Submit ")])])])])},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-info mb-3 mt-4"},[n("p",{staticClass:"mb-0"},[t._v("Please submit file.")])])}],O={name:"StepThree",data:function(){return{}},methods:{previous:function(t){this.$emit("set-back")},submitData:function(t){this.$emit("submit-data",this.$refs.submitBtn,this.$refs.previousBtn)}}},j=O,$=Object(m["a"])(j,k,x,!1,null,null,null),B=$.exports,y=n("3d20"),T=n.n(y),F={name:"ContributionImport",components:{Steps:r["Steps"],Step:r["Step"],StepOne:b,StepTwo:C,StepThree:B},data:function(){return{stepStatus:"process",currentStep:0,form:{file:null},loading:!1}},computed:{current:function(){return this.currentStep}},methods:{changeStep:function(){this.currentStep+=1},changeStepBack:function(){this.currentStep-=1},changeStepStatus:function(t){this.stepStatus=t},setFile:function(t){this.form.file=t},submitData:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,i,r,o,l,p;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,Object(u["a"])(t),Object(u["a"])(e),a=new FormData,a.append("file",n.form.file),s.next=7,c["a"].importcontribution(a);case 7:i=s.sent,r=i.data,Object(u["b"])(t),Object(u["b"])(e),T.a.fire("Success",r.message,"success"),n.$router.push({name:"Contributions"}),s.next=24;break;case 15:s.prev=15,s.t0=s["catch"](0),console.log(s.t0),Object(u["b"])(t),Object(u["b"])(e),o=s.t0.response.data,l="",422===o.code?(p=Object.values(o.errors),p.map((function(t){l+='<span class="d-block">'.concat(t,"</span>")}))):l+=o.message,T.a.fire("Error",l,"error");case 24:case"end":return s.stop()}}),s,null,[[0,15]])})))()}}},P=F,E=(n("06b2"),Object(m["a"])(P,s,a,!1,null,"c819f530",null));e["default"]=E.exports},c567:function(t,e,n){"use strict";var s=n("451b");e["a"]={expensetemplate:function(){return s["b"].get("/staff/expenses/template")},importexpense:function(t){return s["b"].post("/staff/expenses/import",t)},contributiontemplate:function(){return s["b"].get("/staff/contributions/template")},importcontribution:function(t){return s["b"].post("/staff/contributions/import",t)},peopletemplate:function(){return s["b"].get("/staff/people/template")},importpeople:function(t){return s["b"].post("/staff/people/import",t)}}},d81d:function(t,e,n){"use strict";var s=n("23e7"),a=n("b727").map,i=n("1dde"),r=n("ae40"),o=i("map"),l=r("map");s({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},df36:function(t,e,n){}}]);
//# sourceMappingURL=chunk-b07b3ae8.5d57275f.js.map