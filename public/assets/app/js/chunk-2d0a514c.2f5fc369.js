(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a514c"],{"08d2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10 offset-md-1"},[a("div",{staticClass:"alert alert-info mb-3"}),a("form",{on:{submit:function(t){return t.preventDefault(),e.renderReport(t)}}},[a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body px-5"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"category"}},[e._v("Expense Type *")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:e.form.category,expression:"form.category",modifiers:{number:!0}}],staticClass:"custom-select",attrs:{name:"category",id:"category"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.$set(e.form,"category",t.target.multiple?a:a[0])}}},e._l(e.categories,(function(t,r){return a("option",{key:r,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"type"}},[e._v("Type of report *")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:e.form.type,expression:"form.type",modifiers:{number:!0}}],staticClass:"custom-select",attrs:{name:"type",id:"type"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.$set(e.form,"type",t.target.multiple?a:a[0])}}},e._l(e.reportTypes,(function(t,r){return a("option",{key:r,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"duration"}},[e._v("Duration *")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:e.form.duration,expression:"form.duration",modifiers:{number:!0}}],staticClass:"custom-select",attrs:{name:"duration",id:"duration"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var a="_value"in t?t._value:t.value;return e._n(a)}));e.$set(e.form,"duration",t.target.multiple?a:a[0])},function(t){e.form.date=""}]}},[a("option",{attrs:{value:"1"}},[e._v("Day")]),a("option",{attrs:{value:"2"}},[e._v("Week")]),a("option",{attrs:{value:"3"}},[e._v("Month")]),a("option",{attrs:{value:"4"}},[e._v("Year")]),a("option",{attrs:{value:"5"}},[e._v("Specific period")])])])]),1===e.form.duration?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"day"}},[e._v("Date *")]),a("DatePicker",{staticClass:"form-control bg-white",attrs:{id:"dayPicker",placeholder:"Select date",config:e.dateConfig.date,required:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)]):e._e(),2===e.form.duration?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"day"}},[e._v("Week *")]),a("Calendar",{staticClass:"w-100",attrs:{id:"weekSelector",yearNavigator:!0,dateFormat:"yy-mm-dd",yearRange:"1970:2030",placeholder:"Select week",showWeek:"",selectOtherMonths:"",required:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)]):e._e(),3===e.form.duration?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"day"}},[e._v("Month *")]),a("Calendar",{staticClass:"w-100",attrs:{id:"weekSelector",view:"month",dateFormat:"M-yy",yearNavigator:!0,yearRange:"2000:2030",placeholder:"Select week",required:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)]):e._e(),4===e.form.duration?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"year"}},[e._v("Select Year *")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.date,expression:"form.date"}],staticClass:"custom-select",attrs:{name:"year",id:"year",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"date",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Choose year")]),e._l(e.years,(function(t,r){return a("option",{key:r,domProps:{value:t}},[e._v(e._s(t))])}))],2)])]):e._e(),5===e.form.duration?[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[e._v("Start Date *")]),a("DatePicker",{staticClass:"form-control bg-white",attrs:{id:"fromPicker",placeholder:"Select date",config:e.dateConfig.date,required:""},model:{value:e.form.from,callback:function(t){e.$set(e.form,"from",t)},expression:"form.from"}})],1)]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[e._v("End Date *")]),a("DatePicker",{staticClass:"form-control bg-white",attrs:{id:"toPicker",placeholder:"Select date",config:e.dateConfig.date,required:""},model:{value:e.form.to,callback:function(t){e.$set(e.form,"to",t)},expression:"form.to"}})],1)])]:e._e()],2),a("div",{staticClass:"text-center pb-4 mb-3"},[a("button",{ref:"renderReportBtn",staticClass:"btn btn-success"},[e._v(" Render Report ")])]),a("hr"),a("div",{ref:"reportContainer",staticClass:"report-container pt-3"})])])])])])])},o=[],n=(a("99af"),a("c740"),a("4160"),a("d81d"),a("0d03"),a("b0c0"),a("4fad"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("159b"),a("f51a")),s=a("c38f"),i=a.n(s),c=(a("2be5"),a("9631")),l=a.n(c),d=a("ca16"),u=a("11c3"),m=a("f9ef"),f=a("ba30"),p=a.n(f),v=(a("12cc"),a("5a0c"));function h(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var y={name:"ReportExpense",components:{DatePicker:i.a,Calendar:l.a},data:function(){return{years:[],reportTypes:[{value:1,name:"Chart"},{value:2,name:"Accumulation"}],categories:[{value:"all",name:"All"},{value:1,name:"Utility"},{value:2,name:"Donation"},{value:3,name:"Welfare"},{value:4,name:"Equipment & Technology"},{value:5,name:"Allowance"},{value:6,name:"Building & Construction"},{value:7,name:"Publicity"},{value:8,name:"Evangelism"}],form:{category:"all",date:"",duration:1,type:2,from:null,to:null},dateConfig:{date:{allowInput:!0}},resultJsonData:[]}},computed:{currency:function(){return this.$store.getters.currency}},methods:{renderReport:function(e){var t=this,a=this.$refs.renderReportBtn,r={category:"all"!==this.form.category?[this.form.category]:this.form.category,duration:this.form.duration,type:this.form.type,date:3===this.form.duration||2===this.form.duration?v(this.form.date).format("YYYY-MM-DD"):this.form.date};5===this.form.duration&&(r.from=this.form.from,r.to=this.form.to),Object(d["a"])(a),n["a"].expenses({params:r}).then((function(e){var a=e.data;0!==Object.entries(a.data).length&&0!==a.data.length?t.reportGenerator(a.data,r.type):document.querySelector(".report-container").innerHTML='<div class="mt-4 text-center">\n              <h3 class="display-4">NO DATA FOUND</h3>\n            </div>'}))["catch"]((function(e){return console.log(e)}))["finally"]((function(){Object(d["b"])(a)}))},reportTitleGenerator:function(){var e=this.form,t=this.categories.findIndex((function(t){return t.value===e.category})),a=this.categories[t].name;2===e.type&&1===e.duration&&"Total amount of expenses for ".concat("all"===e.category?"all expense categories":a+" expense category"," for")},reportGenerator:function(e,t){2===t?this.renderAccumulationReport(e):this.renderChartReport(e)},renderAccumulationReport:function(e){var t=this,a=this.$refs.reportContainer;a.innerHTML="";var r=[],o=e.results,n=document.createElement("h5"),s=document.createElement("button"),i=document.createElement("div"),c=document.createElement("div");i.setAttribute("id","table-wrapper"),c.className="d-flex justify-content-between",n.className="mb-4",s.className="btn btn-primary export-btn",s.textContent="Export";var l=o.map((function(e){var a={Name:e.name,Amount:"".concat(t.currency+""+e.amount),Date:e.date,Type:e.type};return r.push(a),[e.name,"".concat(t.currency+""+e.amount),e.date,e.type]})),d={columns:["Name","Amount","Date","Type"],data:l,fixedHeader:!0,search:{enabled:!0}};o.length>10&&(d.height="600px"),n.innerHTML="Total: <small>".concat(this.currency,"</small>").concat(h(e.total)),c.appendChild(n),c.appendChild(s),a.appendChild(c),a.appendChild(i),new u["a"](d).render(document.getElementById("table-wrapper")),s.onclick=function(){try{Object(m["json2excel"])({data:r,name:"Expense-report"})}catch(e){console.log(e)}}},renderChartReport:function(e){var t=this,a=e.chart_type,r=e.results,o=this.$refs.reportContainer;if(o.innerHTML="",a)if("multiple bar charts"===a){var n=document.createElement("div");n.setAttribute("id","chartContainer"),n.className="mt-4";for(var s=function(){var e=c[i],a=document.createElement("h5"),s=document.createElement("div"),l=document.createElement("div");l.setAttribute("id","report-".concat(e)),s.className="mt-4",a.className="text-center",a.textContent="Expense report for ".concat(e);var d=r[e],u={series:[{name:"Expense (".concat(t.currency,")"),data:[]}],chart:{type:"bar",height:350},plotOptions:{},dataLabels:{enabled:!0},xaxis:{categories:[]},yaxis:{title:{text:"Expense Amount (".concat(t.currency,")")}}};d.forEach((function(e){u.series[0].data.push(e.total),u.xaxis.categories.push(e.name)})),s.appendChild(a),s.appendChild(l),n.appendChild(s),o.appendChild(n);var m=new p.a(l,u);m.render()},i=0,c=Object.keys(r);i<c.length;i++)s()}else{var l=document.createElement("div");l.setAttribute("id","chartContainer"),l.className="mt-4";var d={series:[{name:"Expense (".concat(this.currency,")"),data:[]}],chart:{type:"bar",height:350},plotOptions:{},dataLabels:{enabled:!0},xaxis:{categories:[]},yaxis:{title:{text:"Expense Amount (".concat(this.currency,")")}}};r.forEach((function(e){d.series[0].data.push(e.total),d.xaxis.categories.push(e.name)})),o.appendChild(l);var u=new p.a(l,d);u.render()}else this.renderAccumulationReport(e.results)}},created:function(){for(var e=(new Date).getFullYear(),t=1970,a=e;a>=t;a--)this.years.push(a)}},g=y,b=a("2877"),C=Object(b["a"])(g,r,o,!1,null,null,null);t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-2d0a514c.2f5fc369.js.map