{"version":3,"sources":["webpack:///./src/router/views/report/contribution/Index.vue?5e02","webpack:///src/router/views/report/contribution/Index.vue","webpack:///./src/router/views/report/contribution/Index.vue?fbda","webpack:///./src/router/views/report/contribution/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","renderReport","attrs","_v","directives","name","rawName","value","form","expression","modifiers","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","_n","$set","multiple","_l","c","i","key","domProps","_s","t","date","duration","dateConfig","model","callback","$$v","_e","year","ref","staticRenderFns","numberWithCommas","x","toString","replace","components","data","years","reportTypes","categories","category","type","from","to","allowInput","resultJsonData","computed","currency","$store","getters","methods","formData","reportTitleGenerator","params","reportGenerator","reportType","renderAccumulationReport","results","renderChartReport","reportContainer","innerHTML","tableContainer","setAttribute","totalExportContainer","className","totalElement","exportBtn","textContent","Name","element","Amount","Date","Type","push","jsonData","columns","tableData","fixedHeader","search","enabled","items","length","tableConfig","height","appendChild","onclick","console","log","err","chartType","chartContainer","yearChartContainer","yearContainer","yearElement","series","chart","plotOptions","dataLabels","xaxis","yaxis","title","text","forEach","total","created","component"],"mappings":"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","file":"js/chunk-2d0b2c9a.e5914722.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-10 offset-md-1\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.renderReport($event)}}},[_c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"card-body px-5\"},[_c('div',{staticClass:\"row mb-3\"},[_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"category\"}},[_vm._v(\"Contribution Type *\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.category),expression:\"form.category\",modifiers:{\"number\":true}}],staticClass:\"custom-select\",attrs:{\"name\":\"category\",\"id\":\"category\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.$set(_vm.form, \"category\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.categories),function(c,i){return _c('option',{key:i,domProps:{\"value\":c.value}},[_vm._v(_vm._s(c.name)+\" \")])}),0)])]),_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"type\"}},[_vm._v(\"Type of report *\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.type),expression:\"form.type\",modifiers:{\"number\":true}}],staticClass:\"custom-select\",attrs:{\"name\":\"type\",\"id\":\"type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.$set(_vm.form, \"type\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.reportTypes),function(t,i){return _c('option',{key:i,domProps:{\"value\":t.value}},[_vm._v(_vm._s(t.name)+\" \")])}),0)])]),_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"duration\"}},[_vm._v(\"Duration *\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.duration),expression:\"form.duration\",modifiers:{\"number\":true}}],staticClass:\"custom-select\",attrs:{\"name\":\"duration\",\"id\":\"duration\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.$set(_vm.form, \"duration\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){_vm.form.date = ''}]}},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"Day\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"Week\")]),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"Month\")]),_c('option',{attrs:{\"value\":\"4\"}},[_vm._v(\"Year\")]),_c('option',{attrs:{\"value\":\"5\"}},[_vm._v(\"Specific period\")])])])]),(_vm.form.duration === 1)?_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"dayPicker\"}},[_vm._v(\"Date *\")]),_c('DatePicker',{staticClass:\"form-control bg-white\",attrs:{\"id\":\"dayPicker\",\"placeholder\":\"Select date\",\"config\":_vm.dateConfig.date,\"required\":\"\"},model:{value:(_vm.form.date),callback:function ($$v) {_vm.$set(_vm.form, \"date\", $$v)},expression:\"form.date\"}})],1)]):_vm._e(),(_vm.form.duration === 2)?_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"weekSelector\"}},[_vm._v(\"Week *\")]),_c('Calendar',{staticClass:\"w-100\",attrs:{\"id\":\"weekSelector\",\"yearNavigator\":true,\"dateFormat\":\"yy-mm-dd\",\"yearRange\":\"1970:2030\",\"placeholder\":\"Select week\",\"showWeek\":\"\",\"selectOtherMonths\":\"\",\"required\":\"\"},model:{value:(_vm.form.date),callback:function ($$v) {_vm.$set(_vm.form, \"date\", $$v)},expression:\"form.date\"}})],1)]):_vm._e(),(_vm.form.duration === 3)?_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"monthSelector\"}},[_vm._v(\"Month *\")]),_c('Calendar',{staticClass:\"w-100\",attrs:{\"id\":\"monthSelector\",\"view\":\"month\",\"dateFormat\":\"M-yy\",\"yearNavigator\":true,\"yearRange\":\"2000:2030\",\"placeholder\":\"Select week\",\"required\":\"\"},model:{value:(_vm.form.date),callback:function ($$v) {_vm.$set(_vm.form, \"date\", $$v)},expression:\"form.date\"}})],1)]):_vm._e(),(_vm.form.duration === 4)?_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"year\"}},[_vm._v(\"Select Year *\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.date),expression:\"form.date\"}],staticClass:\"custom-select\",attrs:{\"name\":\"year\",\"id\":\"year\",\"required\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"date\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"Choose year\")]),_vm._l((_vm.years),function(year,i){return _c('option',{key:i,domProps:{\"value\":year}},[_vm._v(_vm._s(year)+\" \")])})],2)])]):_vm._e(),(_vm.form.duration === 5)?[_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"fromPicker\"}},[_vm._v(\"Start Date *\")]),_c('DatePicker',{staticClass:\"form-control bg-white\",attrs:{\"id\":\"fromPicker\",\"placeholder\":\"Select date\",\"config\":_vm.dateConfig.date,\"required\":\"\"},model:{value:(_vm.form.from),callback:function ($$v) {_vm.$set(_vm.form, \"from\", $$v)},expression:\"form.from\"}})],1)]),_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"toPicker\"}},[_vm._v(\"End Date *\")]),_c('DatePicker',{staticClass:\"form-control bg-white\",attrs:{\"id\":\"toPicker\",\"placeholder\":\"Select date\",\"config\":_vm.dateConfig.date,\"required\":\"\"},model:{value:(_vm.form.to),callback:function ($$v) {_vm.$set(_vm.form, \"to\", $$v)},expression:\"form.to\"}})],1)])]:_vm._e()],2),_c('div',{staticClass:\"text-center pb-4 mb-3\"},[_c('button',{ref:\"renderReportBtn\",staticClass:\"btn btn-success\"},[_vm._v(\" Render Report \")])]),_c('hr'),_c('div',{ref:\"reportContainer\",staticClass:\"report-container pt-3\"})])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-md-10 offset-md-1\">\n        <!--        <div class=\"alert alert-info mb-3\"></div>-->\n\n        <form @submit.prevent=\"renderReport\">\n          <div class=\"card mb-3\">\n            <div class=\"card-body px-5\">\n              <div class=\"row mb-3\">\n                <div class=\"col-md-4\">\n                  <div class=\"form-group\">\n                    <label for=\"category\">Contribution Type *</label>\n                    <select\n                      name=\"category\"\n                      id=\"category\"\n                      class=\"custom-select\"\n                      v-model.number=\"form.category\"\n                    >\n                      <option\n                        :value=\"c.value\"\n                        :key=\"i\"\n                        v-for=\"(c, i) in categories\"\n                      >{{ c.name }}\n                      </option\n                      >\n                    </select>\n                  </div>\n                </div>\n\n                <div class=\"col-md-4\">\n                  <div class=\"form-group\">\n                    <label for=\"type\">Type of report *</label>\n                    <select\n                      name=\"type\"\n                      id=\"type\"\n                      class=\"custom-select\"\n                      v-model.number=\"form.type\"\n                    >\n                      <option\n                        :value=\"t.value\"\n                        :key=\"i\"\n                        v-for=\"(t, i) in reportTypes\"\n                      >{{ t.name }}\n                      </option\n                      >\n                    </select>\n                  </div>\n                </div>\n\n                <div class=\"col-md-4\">\n                  <div class=\"form-group\">\n                    <label for=\"duration\">Duration *</label>\n                    <select\n                      name=\"duration\"\n                      id=\"duration\"\n                      class=\"custom-select\"\n                      v-model.number=\"form.duration\"\n                      @change=\"form.date = ''\"\n                    >\n                      <option value=\"1\">Day</option>\n                      <option value=\"2\">Week</option>\n                      <option value=\"3\">Month</option>\n                      <option value=\"4\">Year</option>\n                      <option value=\"5\">Specific period</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div class=\"col-md-4\" v-if=\"form.duration === 1\">\n                  <div class=\"form-group\">\n                    <label for=\"dayPicker\">Date *</label>\n                    <DatePicker\n                      id=\"dayPicker\"\n                      class=\"form-control bg-white\"\n                      v-model=\"form.date\"\n                      placeholder=\"Select date\"\n                      :config=\"dateConfig.date\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div class=\"col-md-4\" v-if=\"form.duration === 2\">\n                  <div class=\"form-group\">\n                    <label for=\"weekSelector\">Week *</label>\n                    <Calendar\n                      class=\"w-100\"\n                      id=\"weekSelector\"\n                      v-model=\"form.date\"\n                      :yearNavigator=\"true\"\n                      dateFormat=\"yy-mm-dd\"\n                      yearRange=\"1970:2030\"\n                      placeholder=\"Select week\"\n                      showWeek\n                      selectOtherMonths\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div class=\"col-md-4\" v-if=\"form.duration === 3\">\n                  <div class=\"form-group\">\n                    <label for=\"monthSelector\">Month *</label>\n                    <Calendar\n                      class=\"w-100\"\n                      id=\"monthSelector\"\n                      v-model=\"form.date\"\n                      view=\"month\"\n                      dateFormat=\"M-yy\"\n                      :yearNavigator=\"true\"\n                      yearRange=\"2000:2030\"\n                      placeholder=\"Select week\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div class=\"col-md-4\" v-if=\"form.duration === 4\">\n                  <div class=\"form-group\">\n                    <label for=\"year\">Select Year *</label>\n                    <select\n                      name=\"year\"\n                      id=\"year\"\n                      class=\"custom-select\"\n                      v-model=\"form.date\"\n                      required\n                    >\n                      <option value>Choose year</option>\n                      <option\n                        :value=\"year\"\n                        v-for=\"(year, i) in years\"\n                        :key=\"i\"\n                      >{{ year }}\n                      </option\n                      >\n                    </select>\n                  </div>\n                </div>\n\n                <template v-if=\"form.duration === 5\">\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group\">\n                      <label for=\"fromPicker\">Start Date *</label>\n                      <DatePicker\n                        id=\"fromPicker\"\n                        class=\"form-control bg-white\"\n                        v-model=\"form.from\"\n                        placeholder=\"Select date\"\n                        :config=\"dateConfig.date\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group\">\n                      <label for=\"toPicker\">End Date *</label>\n                      <DatePicker\n                        id=\"toPicker\"\n                        class=\"form-control bg-white\"\n                        v-model=\"form.to\"\n                        placeholder=\"Select date\"\n                        :config=\"dateConfig.date\"\n                        required\n                      />\n                    </div>\n                  </div>\n                </template>\n              </div>\n\n              <div class=\"text-center pb-4 mb-3\">\n                <button class=\"btn btn-success\" ref=\"renderReportBtn\">\n                  Render Report\n                </button>\n              </div>\n\n              <hr/>\n\n              <div class=\"report-container pt-3\" ref=\"reportContainer\"></div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Report from \"@services/api/reports\";\nimport DatePicker from \"vue-flatpickr-component\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport Calendar from \"primevue/calendar\";\nimport {addBtnLoading, removeBtnLoading} from \"@services/helpers\";\n\nimport {Grid} from \"gridjs\";\nimport {json2excel} from \"js2excel\";\nimport ApexCharts from \"apexcharts\";\n\nimport \"gridjs/dist/theme/mermaid.css\";\n\nconst dayjs = require(\"dayjs\");\n\nfunction numberWithCommas(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nexport default {\n  name: \"ReportExpense\",\n  components: {DatePicker, Calendar},\n  data() {\n    return {\n      years: [],\n      reportTypes: [\n        {value: 1, name: \"Chart\"},\n        {value: 2, name: \"Accumulation\"},\n      ],\n      categories: [\n        {value: \"all\", name: \"All\"},\n        {value: 1, name: \"Utility\"},\n        {value: 2, name: \"Donation\"},\n        {value: 3, name: \"Welfare\"},\n        {value: 4, name: \"Equipment & Technology\"},\n        {value: 5, name: \"Allowance\"},\n        {value: 6, name: \"Building & Construction\"},\n        {value: 7, name: \"Publicity\"},\n        {value: 8, name: \"Evangelism\"},\n      ],\n      form: {\n        category: \"all\",\n        date: \"\",\n        duration: 1,\n        type: 2,\n        from: null,\n        to: null,\n      },\n      dateConfig: {\n        date: {\n          allowInput: true,\n        },\n      },\n      resultJsonData: [],\n    };\n  },\n  computed: {\n    currency() {\n      return this.$store.getters.currency;\n    },\n  },\n  methods: {\n    renderReport(e) {\n      const btn = this.$refs.renderReportBtn;\n      let formData = {\n        category:\n          this.form.category !== \"all\"\n            ? [this.form.category]\n            : this.form.category,\n        duration: this.form.duration,\n        type: this.form.type,\n        date:\n          this.form.duration === 3 || this.form.duration === 2\n            ? dayjs(this.form.date).format(\"YYYY-MM-DD\")\n            : this.form.date,\n      };\n\n      if (this.form.duration === 5) {\n        formData.from = this.form.from;\n        formData.to = this.form.to;\n      }\n\n      addBtnLoading(btn);\n\n      Report.expenses({params: formData})\n        .then((response) => {\n          const res = response.data;\n          if (Object.entries(res.data).length === 0 || res.data.length === 0) {\n            document.querySelector(\n              \".report-container\"\n            ).innerHTML = `<div class=\"mt-4 text-center\">\n              <h3 class=\"display-4\">NO DATA FOUND</h3>\n            </div>`;\n            return;\n          }\n\n          //this.reportTitleGenerator();\n          this.reportGenerator(res.data, formData.type);\n        })\n        .catch((err) => console.log(err))\n        .finally(() => {\n          removeBtnLoading(btn);\n        });\n    },\n\n    reportTitleGenerator() {\n      let title;\n      let params = this.form;\n\n      const catIndex = this.categories.findIndex(\n        (record) => record.value === params.category\n      );\n      const {name: categoryName} = this.categories[catIndex];\n      if (params.type === 2) {\n        if (params.duration === 1) {\n          title = `Total amount of expenses for ${\n            params.category === \"all\"\n              ? \"all expense categories\"\n              : categoryName + \" expense category\"\n          } for`;\n        }\n      } else {\n      }\n    },\n\n    reportGenerator(results, reportType) {\n      // Accumulation\n      if (reportType === 2) {\n        this.renderAccumulationReport(results);\n      } else {\n        this.renderChartReport(results);\n      }\n    },\n\n    renderAccumulationReport(results) {\n      const reportContainer = this.$refs.reportContainer;\n      reportContainer.innerHTML = \"\";\n\n      const resultJsonData = [];\n      const {results: items} = results;\n      const totalElement = document.createElement(\"h5\");\n      const exportBtn = document.createElement(\"button\");\n      const tableContainer = document.createElement(\"div\");\n      const totalExportContainer = document.createElement(\"div\");\n      tableContainer.setAttribute(\"id\", \"table-wrapper\");\n      totalExportContainer.className = \"d-flex justify-content-between\";\n      totalElement.className = \"mb-4\";\n      exportBtn.className = \"btn btn-primary export-btn\";\n      exportBtn.textContent = \"Export\";\n\n      const tableData = items.map((element) => {\n        const jsonData = {\n          Name: element.name,\n          Amount: `${this.currency + \"\" + element.amount}`,\n          Date: element.date,\n          Type: element.type,\n        };\n\n        resultJsonData.push(jsonData);\n        return [\n          element.name,\n          `${this.currency + \"\" + element.amount}`,\n          element.date,\n          element.type,\n        ];\n      });\n\n      let tableConfig = {\n        columns: [\"Name\", \"Amount\", \"Date\", \"Type\"],\n        data: tableData,\n        fixedHeader: true,\n        search: {\n          enabled: true,\n        },\n      };\n\n      if (items.length > 10) {\n        tableConfig.height = \"600px\";\n      }\n\n      totalElement.innerHTML = `Total: <small>${\n        this.currency\n      }</small>${numberWithCommas(results.total)}`;\n      totalExportContainer.appendChild(totalElement);\n      totalExportContainer.appendChild(exportBtn);\n      reportContainer.appendChild(totalExportContainer);\n      reportContainer.appendChild(tableContainer);\n\n      new Grid(tableConfig).render(document.getElementById(\"table-wrapper\"));\n\n      exportBtn.onclick = () => {\n        try {\n          json2excel({\n            data: resultJsonData,\n            name: \"Expense-report\",\n          });\n        } catch (err) {\n          console.log(err);\n        }\n      };\n    },\n\n    renderChartReport(results) {\n      const {chart_type: chartType, results: items} = results;\n      const reportContainer = this.$refs.reportContainer;\n      reportContainer.innerHTML = \"\";\n\n      if (chartType) {\n        if (chartType === \"multiple bar charts\") {\n          const chartContainer = document.createElement(\"div\");\n          chartContainer.setAttribute(\"id\", \"chartContainer\");\n          chartContainer.className = \"mt-4\";\n\n          for (const key of Object.keys(items)) {\n            const yearElement = document.createElement(\"h5\");\n            const yearContainer = document.createElement(\"div\");\n            const yearChartContainer = document.createElement(\"div\");\n            yearChartContainer.setAttribute(\"id\", `report-${key}`);\n            yearContainer.className = \"mt-4\";\n            yearElement.className = \"text-center\";\n            yearElement.textContent = `Expense report for ${key}`;\n\n            const data = items[key];\n            const options = {\n              series: [{name: `Expense (${this.currency})`, data: []}],\n              chart: {\n                type: \"bar\",\n                height: 350,\n              },\n              plotOptions: {},\n              dataLabels: {\n                enabled: true,\n              },\n              xaxis: {\n                categories: [],\n              },\n              yaxis: {\n                title: {\n                  text: `Expense Amount (${this.currency})`,\n                },\n              },\n            };\n\n            // Set chart values\n            data.forEach((element) => {\n              options.series[0].data.push(element.total);\n              options.xaxis.categories.push(element.name);\n            });\n\n            yearContainer.appendChild(yearElement);\n            yearContainer.appendChild(yearChartContainer);\n            chartContainer.appendChild(yearContainer);\n\n            reportContainer.appendChild(chartContainer);\n\n            const chart = new ApexCharts(yearChartContainer, options);\n            chart.render();\n          }\n        } else {\n          const chartContainer = document.createElement(\"div\");\n          chartContainer.setAttribute(\"id\", \"chartContainer\");\n          chartContainer.className = \"mt-4\";\n\n          const options = {\n            series: [{name: `Expense (${this.currency})`, data: []}],\n            chart: {\n              type: \"bar\",\n              height: 350,\n            },\n            plotOptions: {\n              // bar: {\n              //   horizontal: true,\n              // },\n            },\n            dataLabels: {\n              enabled: true,\n            },\n            xaxis: {\n              categories: [],\n            },\n            yaxis: {\n              title: {\n                text: `Expense Amount (${this.currency})`,\n              },\n            },\n          };\n\n          // Set chart values\n          items.forEach((element) => {\n            options.series[0].data.push(element.total);\n            options.xaxis.categories.push(element.name);\n          });\n\n          reportContainer.appendChild(chartContainer);\n\n          const chart = new ApexCharts(chartContainer, options);\n          chart.render();\n        }\n      } else {\n        this.renderAccumulationReport(results.results);\n      }\n    },\n  },\n  created() {\n    const currentYear = new Date().getFullYear();\n    const startYear = 1970;\n\n    for (let i = currentYear; i >= startYear; i--) this.years.push(i);\n  },\n};\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=76ce4e46&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}